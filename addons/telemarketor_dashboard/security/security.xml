<!-- /crm_telemarketing/security/security.xml -->
<odoo>
    <!-- Groups -->
    <record id="group_tele_brand_rep" model="res.groups">
        <field name="name">AMG / Brand Representative</field>
        <field name="category_id" ref="base.module_category_sales_management"/>
    </record>

    <record id="group_tele_brand_manager" model="res.groups">
        <field name="name">AMG / Brand Manager</field>
        <field name="category_id" ref="base.module_category_sales_management"/>
    </record>

    <record id="group_tele_sister_company_manager" model="res.groups">
        <field name="name">AMG / Sister Company Manager</field>
        <field name="category_id" ref="base.module_category_sales_management"/>
    </record>

    <!-- Record Rules -->
    <!-- Brand rep: only their own leads -->
    <record id="rule_lead_owner_only" model="ir.rule">
        <field name="name">Lead: Brand Rep only</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="domain_force">['|',('assigned_user_id','=',user.id),('user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('crm_telemarketing.group_tele_brand_rep'))]"/>
    </record>

    <!-- Manager: see team members (simple implementation: use manager group) -->
    <record id="rule_lead_brand_manager" model="ir.rule">
        <field name="name">Lead: Brand Manager access</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('crm_telemarketing.group_tele_brand_manager'))]"/>
    </record>

    <!-- Sister company manager: access based on company_id -->
    <record id="rule_partner_company" model="ir.rule">
        <field name="name">Partner: company only</field>
        <field name="model_id" ref="base.model_res_partner"/>
        <field name="domain_force">[('company_id','=',user.company_id.id)]</field>
        <field name="groups" eval="[(4, ref('crm_telemarketing.group_tele_sister_company_manager'))]"/>
    </record>
</odoo>
