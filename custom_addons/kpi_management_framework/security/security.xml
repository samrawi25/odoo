<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- ========================= -->
        <!--  TELEMARKETER GROUPS     -->
        <!-- ========================= -->
        <record id="group_telemarketer" model="res.groups">
            <field name="name">Telemarketer</field>
            <field name="category_id" ref="base.module_category_sales_crm"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="group_telemarketer_full" model="res.groups">
            <field name="name">Telemarketer - Full Access</field>
            <field name="category_id" ref="base.module_category_sales_crm"/>
            <field name="implied_ids" eval="[
                (4, ref('base.group_user')),
                (4, ref('sales_team.group_sale_salesman'))
            ]"/>
        </record>

        <!-- ========================= -->
        <!--  TELEMARKETING RULES      -->
        <!-- ========================= -->

        <!-- Regular users: See only own records -->
        <record id="telemarketing_confirmation_user_rule" model="ir.rule">
            <field name="name">Telemarketing Confirmations: Own Records Only</field>
            <field name="model_id" ref="kpi_management_framework.model_telemarketing_confirmation"/>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field name="domain_force">[('telemarketer_id', '=', user.id)]</field>
        </record>

        <!-- Telemarketers: See only their own records -->
        <record id="telemarketing_confirmation_telemarketer_rule" model="ir.rule">
            <field name="name">Telemarketing Confirmations: Telemarketer Sees Own</field>
            <field name="model_id" ref="kpi_management_framework.model_telemarketing_confirmation"/>
            <field name="groups" eval="[(4, ref('kpi_management_framework.group_telemarketer'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <!-- Managers: See all -->
        <record id="telemarketing_confirmation_manager_rule" model="ir.rule">
            <field name="name">Telemarketing Confirmations: Manager Sees All</field>
            <field name="model_id" ref="kpi_management_framework.model_telemarketing_confirmation"/>
            <field name="groups" eval="[(4, ref('sales_team.group_sale_manager'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <!-- Admin/System: See all -->
        <record id="telemarketing_confirmation_admin_rule" model="ir.rule">
            <field name="name">Telemarketing Confirmations: Admin Sees All</field>
            <field name="model_id" ref="kpi_management_framework.model_telemarketing_confirmation"/>
            <field name="groups" eval="[(4, ref('base.group_system'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

    </data>
</odoo>
